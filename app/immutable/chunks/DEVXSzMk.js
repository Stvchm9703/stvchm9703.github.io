import{_ as t,c as i,d as n,g as e,h as s,l as o,m as h,n as r,o as a,p as _,r as c,s as l,y as u}from"./BiyZ5n6c.js";import{c as f,i as x,l as y,n as p,o as v,r as d,s as g,t as b}from"./rtXCe8q0.js";import{g as m,h as w,p as T}from"./zHg7iTkV.js";import{F as S,f as N,m as k,r as M,s as E}from"./D-SBgl47.js";import{o as P}from"./CB30iVOe.js";import{t as $}from"./C1TBdDA0.js";var j=Object.create,C=function(){function t(){}return function(i){if(!h(i))return{};if(j)return j(i);t.prototype=i;var n=new t;return t.prototype=void 0,n}}();var O=function(t,i,n){switch(n.length){case 0:return t.call(i);case 1:return t.call(i,n[0]);case 2:return t.call(i,n[0],n[1]);case 3:return t.call(i,n[0],n[1],n[2])}return t.apply(i,n)};var z=function(t,i){var n=-1,e=t.length;for(i||(i=Array(e));++n<e;)i[n]=t[n];return i},A=Date.now;var I=function(t){var i=0,n=0;return function(){var e=A(),s=16-(e-n);if(n=e,s>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(void 0,arguments)}};var B=function(t){return function(){return t}},F=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(i){}}(),W=I(F?function(t,i){return F(t,"toString",{configurable:!0,enumerable:!1,value:B(i),writable:!0})}:y);var D=function(t,i,n){"__proto__"==i&&F?F(t,i,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[i]=n},L=Object.prototype.hasOwnProperty;var H=function(t,i,n){var e=t[i];L.call(t,i)&&g(e,n)&&(void 0!==n||i in t)||D(t,i,n)};var R=function(t,i,n,e){var s=!n;n||(n={});for(var o=-1,h=i.length;++o<h;){var r=i[o],a=e?e(n[r],t[r],r,n,t):void 0;void 0===a&&(a=t[r]),s?D(n,r,a):H(n,r,a)}return n},U=Math.max;var q=function(t,i,n){return i=U(void 0===i?t.length-1:i,0),function(){for(var e=arguments,s=-1,o=U(e.length-i,0),h=Array(o);++s<o;)h[s]=e[i+s];s=-1;for(var r=Array(i+1);++s<i;)r[s]=e[s];return r[i]=n(h),O(t,this,r)}};var G=function(t,i){return W(q(t,i,y),t+"")};var Y=function(t,i,n){if(!h(n))return!1;var e=typeof i;return!!("number"==e?o(n)&&f(i,n.length):"string"==e&&i in n)&&g(n[i],t)};var J=function(t){return G(function(i,n){var e=-1,s=n.length,o=s>1?n[s-1]:void 0,h=s>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(s--,o):void 0,h&&Y(n[0],n[1],h)&&(o=s<3?void 0:o,s=1),i=Object(i);++e<s;){var r=n[e];r&&t(i,r,e,o)}return i})};var K=function(t){var i=[];if(null!=t)for(var n in Object(t))i.push(n);return i},X=Object.prototype.hasOwnProperty;var V=function(t){if(!h(t))return K(t);var n=i(t),e=[];for(var s in t)("constructor"!=s||!n&&X.call(t,s))&&e.push(s);return e};var Q=function(t){return o(t)?v(t,!0):V(t)},Z=r(Object.getPrototypeOf,Object),tt=Function.prototype,it=Object.prototype,nt=tt.toString,et=it.hasOwnProperty,st=nt.call(Object);var ot=function(i){if(!e(i)||"[object Object]"!=t(i))return!1;var n=Z(i);if(null===n)return!0;var s=et.call(n,"constructor")&&n.constructor;return"function"==typeof s&&s instanceof s&&nt.call(s)==st},ht="object"==typeof exports&&exports&&!exports.nodeType&&exports,rt=ht&&"object"==typeof module&&module&&!module.nodeType&&module,at=rt&&rt.exports===ht?u.Buffer:void 0,_t=at?at.allocUnsafe:void 0;var ct=function(t,i){if(i)return t.slice();var n=t.length,e=_t?_t(n):new t.constructor(n);return t.copy(e),e};var lt=function(t){var i=new t.constructor(t.byteLength);return new p(i).set(new p(t)),i};var ut=function(t,i){var n=i?lt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var ft=function(t){return"function"!=typeof t.constructor||i(t)?{}:C(Z(t))};var xt=function(t,i,n){(void 0!==n&&!g(t[i],n)||void 0===n&&!(i in t))&&D(t,i,n)};var yt=function(t){return e(t)&&o(t)};var pt=function(t,i){if(("constructor"!==i||"function"!=typeof t[i])&&"__proto__"!=i)return t[i]};var vt=function(t){return R(t,Q(t))};var dt=function(t,i,n,e,o,r,u){var f=pt(t,n),x=pt(i,n),y=u.get(x);if(y)xt(t,n,y);else{var p=r?r(f,x,n+"",t,i,u):void 0,v=void 0===p;if(v){var d=s(x),g=!d&&a(x),b=!d&&!g&&c(x);p=x,d||g||b?s(f)?p=f:yt(f)?p=z(f):g?(v=!1,p=ct(x,!0)):b?(v=!1,p=ut(x,!0)):p=[]:ot(x)||l(x)?(p=f,l(f)?p=vt(f):h(f)&&!_(f)||(p=ft(x))):v=!1}v&&(u.set(x,p),o(p,x,e,r,u),u.delete(x)),xt(t,n,p)}};var gt=function t(i,n,e,s,o){i!==n&&b(n,function(r,a){if(o||(o=new d),h(r))dt(i,n,a,e,t,s,o);else{var _=s?s(pt(i,a),r,a+"",i,n,o):void 0;void 0===_&&(_=r),xt(i,a,_)}},Q)},bt=J(function(t,i,n){gt(t,i,n)});function mt(t){this._context=t}function wt(t){return new mt(t)}mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};var Tt=class{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i)}this._x0=t,this._y0=i}};function St(t){return new Tt(t,!0)}function Nt(t){return new Tt(t,!1)}function kt(){}function Mt(t,i,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+n)/6)}function Et(t){this._context=t}function Pt(t){return new Et(t)}function $t(t){this._context=t}function jt(t){this._context=t}function Ct(t,i){this._basis=new Et(t),this._beta=i}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mt(this,t,i)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}},$t.prototype={areaStart:kt,areaEnd:kt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:Mt(this,t,i)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}},jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,e=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 3:this._point=4;default:Mt(this,t,i)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}},Ct.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,n=t.length-1;if(n>0)for(var e,s=t[0],o=i[0],h=t[n]-s,r=i[n]-o,a=-1;++a<=n;)e=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(s+e*h),this._beta*i[a]+(1-this._beta)*(o+e*r));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}};var Ot=function t(i){function n(t){return 1===i?new Et(t):new Ct(t,i)}return n.beta=function(i){return t(+i)},n}(.85);function zt(t,i,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function At(t,i){this._context=t,this._k=(1-i)/6}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:zt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2,this._x1=t,this._y1=i;break;case 2:this._point=3;default:zt(this,t,i)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var It=function t(i){function n(t){return new At(t,i)}return n.tension=function(i){return t(+i)},n}(0);function Bt(t,i){this._context=t,this._k=(1-i)/6}Bt.prototype={areaStart:kt,areaEnd:kt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:zt(this,t,i)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var Ft=function t(i){function n(t){return new Bt(t,i)}return n.tension=function(i){return t(+i)},n}(0);function Wt(t,i){this._context=t,this._k=(1-i)/6}Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:zt(this,t,i)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var Dt=function t(i){function n(t){return new Wt(t,i)}return n.tension=function(i){return t(+i)},n}(0);function Lt(t,i,n){var e=t._x1,s=t._y1,o=t._x2,h=t._y2;if(t._l01_a>1e-12){var r=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,a=3*t._l01_a*(t._l01_a+t._l12_a);e=(e*r-t._x0*t._l12_2a+t._x2*t._l01_2a)/a,s=(s*r-t._y0*t._l12_2a+t._y2*t._l01_2a)/a}if(t._l23_a>1e-12){var _=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*_+t._x1*t._l23_2a-i*t._l12_2a)/c,h=(h*_+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(e,s,o,h,t._x2,t._y2)}function Ht(t,i){this._context=t,this._alpha=i}Ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;default:Lt(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var Rt=function t(i){function n(t){return i?new Ht(t,i):new At(t,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Ut(t,i){this._context=t,this._alpha=i}Ut.prototype={areaStart:kt,areaEnd:kt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:Lt(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var qt=function t(i){function n(t){return i?new Ut(t,i):new Bt(t,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Gt(t,i){this._context=t,this._alpha=i}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Lt(this,t,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var Yt=function t(i){function n(t){return i?new Gt(t,i):new Wt(t,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Jt(t){this._context=t}function Kt(t){return t<0?-1:1}function Xt(t,i,n){var e=t._x1-t._x0,s=i-t._x1,o=(t._y1-t._y0)/(e||s<0&&-0),h=(n-t._y1)/(s||e<0&&-0),r=(o*s+h*e)/(e+s);return(Kt(o)+Kt(h))*Math.min(Math.abs(o),Math.abs(h),.5*Math.abs(r))||0}function Vt(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function Qt(t,i,n){var e=t._x0,s=t._y0,o=t._x1,h=t._y1,r=(o-e)/3;t._context.bezierCurveTo(e+r,s+r*i,o-r,h-r*n,o,h)}function Zt(t){this._context=t}function ti(t){this._context=new ii(t)}function ii(t){this._context=t}function ni(t){return new Zt(t)}function ei(t){return new ti(t)}function si(t){this._context=t}function oi(t){var i,n,e=t.length-1,s=new Array(e),o=new Array(e),h=new Array(e);for(s[0]=0,o[0]=2,h[0]=t[0]+2*t[1],i=1;i<e-1;++i)s[i]=1,o[i]=4,h[i]=4*t[i]+2*t[i+1];for(s[e-1]=2,o[e-1]=7,h[e-1]=8*t[e-1]+t[e],i=1;i<e;++i)n=s[i]/o[i-1],o[i]-=n,h[i]-=n*h[i-1];for(s[e-1]=h[e-1]/o[e-1],i=e-2;i>=0;--i)s[i]=(h[i]-s[i+1])/o[i];for(o[e-1]=(t[e]+s[e-1])/2,i=0;i<e-1;++i)o[i]=2*t[i+1]-s[i+1];return[s,o]}function hi(t){return new si(t)}function ri(t,i){this._context=t,this._t=i}function ai(t){return new ri(t,.5)}function _i(t){return new ri(t,0)}function ci(t){return new ri(t,1)}Jt.prototype={areaStart:kt,areaEnd:kt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,i){t=+t,i=+i,this._point?this._context.lineTo(t,i):(this._point=1,this._context.moveTo(t,i))}},Zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qt(this,this._t0,Vt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){var n=NaN;if(i=+i,(t=+t)!==this._x1||i!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,Qt(this,Vt(this,n=Xt(this,t,i)),n);break;default:Qt(this,this._t0,n=Xt(this,t,i))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._t0=n}}},(ti.prototype=Object.create(Zt.prototype)).point=function(t,i){Zt.prototype.point.call(this,i,t)},ii.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,e,s,o){this._context.bezierCurveTo(i,t,e,n,o,s)}},si.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),2===n)this._context.lineTo(t[1],i[1]);else for(var e=oi(t),s=oi(i),o=0,h=1;h<n;++o,++h)this._context.bezierCurveTo(e[0][o],s[0][o],e[1][o],s[1][o],t[h],i[h]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,i){this._x.push(+t),this._y.push(+i)}},ri.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,i)}}this._x=t,this._y=i}};var li=$(),ui="​",fi={curveBasis:Pt,curveBasisClosed:function(t){return new $t(t)},curveBasisOpen:function(t){return new jt(t)},curveBumpX:St,curveBumpY:Nt,curveBundle:Ot,curveCardinalClosed:Ft,curveCardinalOpen:Dt,curveCardinal:It,curveCatmullRomClosed:qt,curveCatmullRomOpen:Yt,curveCatmullRom:Rt,curveLinear:wt,curveLinearClosed:function(t){return new Jt(t)},curveMonotoneX:ni,curveMonotoneY:ei,curveNatural:hi,curveStep:ai,curveStepAfter:ci,curveStepBefore:_i},xi=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,yi=w(function(t,i){const n=pi(t,/(?:init\b)|(?:initialize\b)/);let e={};if(Array.isArray(n)){const t=n.map(t=>t.args);S(t),e=M(e,[...t])}else e=n.args;if(!e)return;let s=N(t,i);const o="config";return void 0!==e[o]&&("flowchart-v2"===s&&(s="flowchart"),e[s]=e[o],delete e[o]),e},"detectInit"),pi=w(function(t,i=null){try{const n=new RegExp(`[%]{2}(?![{]${xi.source})(?=[}][%]{2}).*\n`,"ig");let e;t=t.trim().replace(n,"").replace(/'/gm,'"'),m.debug(`Detecting diagram directive${null!==i?" type:"+i:""} based on the text:${t}`);const s=[];for(;null!==(e=k.exec(t));)if(e.index===k.lastIndex&&k.lastIndex++,e&&!i||i&&e[1]?.match(i)||i&&e[2]?.match(i)){const t=e[1]?e[1]:e[2],i=e[3]?e[3].trim():e[4]?JSON.parse(e[4].trim()):null;s.push({type:t,args:i})}return 0===s.length?{type:t,args:null}:1===s.length?s[0]:s}catch(n){return m.error(`ERROR: ${n.message} - Unable to parse directive type: '${i}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),vi=w(function(t){return t.replace(k,"")},"removeDirectives"),di=w(function(t,i){for(const[n,e]of i.entries())if(e.match(t))return n;return-1},"isSubstringInArray");function gi(t,i){return t?fi[`curve${t.charAt(0).toUpperCase()+t.slice(1)}`]??i:i}function bi(t,i){const n=t.trim();if(n)return"loose"!==i.securityLevel?(0,li.sanitizeUrl)(n):n}w(gi,"interpolateToCurve"),w(bi,"formatUrl");var mi=w((t,...i)=>{const n=t.split("."),e=n.length-1,s=n[e];let o=window;for(let h=0;h<e;h++)if(o=o[n[h]],!o)return void m.error(`Function name: ${t} not found in window`);o[s](...i)},"runFunc");function wi(t,i){return t&&i?Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)):0}function Ti(t){let i,n=0;return t.forEach(t=>{n+=wi(t,i),i=t}),ki(t,n/2)}function Si(t){return 1===t.length?t[0]:Ti(t)}w(wi,"distance"),w(Ti,"traverseEdge"),w(Si,"calcLabelPosition");var Ni=w((t,i=2)=>{const n=Math.pow(10,i);return Math.round(t*n)/n},"roundNumber"),ki=w((t,i)=>{let n,e=i;for(const s of t){if(n){const t=wi(s,n);if(0===t)return n;if(t<e)e-=t;else{const i=e/t;if(i<=0)return n;if(i>=1)return{x:s.x,y:s.y};if(i>0&&i<1)return{x:Ni((1-i)*n.x+i*s.x,5),y:Ni((1-i)*n.y+i*s.y,5)}}}n=s}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),Mi=w((t,i,n)=>{m.info(`our points ${JSON.stringify(i)}`),i[0]!==n&&(i=i.reverse());const e=ki(i,25),s=t?10:5,o=Math.atan2(i[0].y-e.y,i[0].x-e.x),h={x:0,y:0};return h.x=Math.sin(o)*s+(i[0].x+e.x)/2,h.y=-Math.cos(o)*s+(i[0].y+e.y)/2,h},"calcCardinalityPosition");function Ei(t,i,n){const e=structuredClone(n);m.info("our points",e),"start_left"!==i&&"start_right"!==i&&e.reverse();const s=ki(e,25+t),o=10+.5*t,h=Math.atan2(e[0].y-s.y,e[0].x-s.x),r={x:0,y:0};return"start_left"===i?(r.x=Math.sin(h+Math.PI)*o+(e[0].x+s.x)/2,r.y=-Math.cos(h+Math.PI)*o+(e[0].y+s.y)/2):"end_right"===i?(r.x=Math.sin(h-Math.PI)*o+(e[0].x+s.x)/2-5,r.y=-Math.cos(h-Math.PI)*o+(e[0].y+s.y)/2-5):"end_left"===i?(r.x=Math.sin(h)*o+(e[0].x+s.x)/2-5,r.y=-Math.cos(h)*o+(e[0].y+s.y)/2-5):(r.x=Math.sin(h)*o+(e[0].x+s.x)/2,r.y=-Math.cos(h)*o+(e[0].y+s.y)/2),r}function Pi(t){let i="",n="";for(const e of t)void 0!==e&&(e.startsWith("color:")||e.startsWith("text-align:")?n=n+e+";":i=i+e+";");return{style:i,labelStyle:n}}w(Ei,"calcTerminalLabelPosition"),w(Pi,"getStylesFromArray");var $i=0,ji=w(()=>($i++,"id-"+Math.random().toString(36).substr(2,12)+"-"+$i),"generateId");function Ci(t){let i="";for(let n=0;n<t;n++)i+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return i}w(Ci,"makeRandomHex");var Oi=w(t=>Ci(t.length),"random"),zi=w(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),Ai=w(function(t,i){const n=i.text.replace(E.lineBreakRegex," "),[,e]=Gi(i.fontSize),s=t.append("text");s.attr("x",i.x),s.attr("y",i.y),s.style("text-anchor",i.anchor),s.style("font-family",i.fontFamily),s.style("font-size",e),s.style("font-weight",i.fontWeight),s.attr("fill",i.fill),void 0!==i.class&&s.attr("class",i.class);const o=s.append("tspan");return o.attr("x",i.x+2*i.textMargin),o.attr("fill",i.fill),o.text(n),s},"drawSimpleText"),Ii=x((t,i,n)=>{if(!t)return t;if(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),E.lineBreakRegex.test(t))return t;const e=t.split(" ").filter(Boolean),s=[];let o="";return e.forEach((t,h)=>{const r=Wi(`${t} `,n),a=Wi(o,n);if(r>i){const{hyphenatedStrings:e,remainingWord:h}=Bi(t,i,"-",n);s.push(o,...e),o=h}else a+r>=i?(s.push(o),o=t):o=[o,t].filter(Boolean).join(" ");h+1===e.length&&s.push(o)}),s.filter(t=>""!==t).join(n.joinWith)},(t,i,n)=>`${t}${i}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),Bi=x((t,i,n="-",e)=>{e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},e);const s=[...t],o=[];let h="";return s.forEach((t,r)=>{const a=`${h}${t}`;if(Wi(a,e)>=i){const t=r+1,i=s.length===t,e=`${a}${n}`;o.push(i?a:e),h=""}else h=a}),{hyphenatedStrings:o,remainingWord:h}},(t,i,n="-",e)=>`${t}${i}${n}${e.fontSize}${e.fontWeight}${e.fontFamily}`);function Fi(t,i){return Li(t,i).height}function Wi(t,i){return Li(t,i).width}w(Fi,"calculateTextHeight"),w(Wi,"calculateTextWidth");var Di,Li=x((t,i)=>{const{fontSize:n=12,fontFamily:e="Arial",fontWeight:s=400}=i;if(!t)return{width:0,height:0};const[,o]=Gi(n),h=["sans-serif",e],r=t.split(E.lineBreakRegex),a=[],_=T("body");if(!_.remove)return{width:0,height:0,lineHeight:0};const c=_.append("svg");for(const l of h){let t=0;const i={width:0,height:0,lineHeight:0};for(const n of r){const e=zi();e.text=n||"​";const h=Ai(c,e).style("font-size",o).style("font-weight",s).style("font-family",l),r=(h._groups||h)[0][0].getBBox();if(0===r.width&&0===r.height)throw new Error("svg element not in render tree");i.width=Math.round(Math.max(i.width,r.width)),t=Math.round(r.height),i.height+=t,i.lineHeight=Math.round(Math.max(i.lineHeight,t))}a.push(i)}return c.remove(),a[isNaN(a[1].height)||isNaN(a[1].width)||isNaN(a[1].lineHeight)||a[0].height>a[1].height&&a[0].width>a[1].width&&a[0].lineHeight>a[1].lineHeight?0:1]},(t,i)=>`${t}${i.fontSize}${i.fontWeight}${i.fontFamily}`),Hi=class{constructor(t=!1,i){this.count=0,this.count=i?i.length:0,this.next=t?()=>this.count++:()=>Date.now()}static#t=w(this,"InitIDGenerator")},Ri=w(function(t){return Di=Di||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Di.innerHTML=t,unescape(Di.textContent)},"entityDecode");function Ui(t){return"str"in t}w(Ui,"isDetailedError");var qi=w((t,i,n,e)=>{if(!e)return;const s=t.node()?.getBBox();s&&t.append("text").text(e).attr("text-anchor","middle").attr("x",s.x+s.width/2).attr("y",-n).attr("class",i)},"insertTitle"),Gi=w(t=>{if("number"==typeof t)return[t,t+"px"];const i=parseInt(t??"",10);return Number.isNaN(i)?[void 0,void 0]:t===String(i)?[i,t+"px"]:[i,t]},"parseFontSize");function Yi(t,i){return bt({},t,i)}w(Yi,"cleanAndMerge");var Ji={assignWithDepth:M,wrapLabel:Ii,calculateTextHeight:Fi,calculateTextWidth:Wi,calculateTextDimensions:Li,cleanAndMerge:Yi,detectInit:yi,detectDirective:pi,isSubstringInArray:di,interpolateToCurve:gi,calcLabelPosition:Si,calcCardinalityPosition:Mi,calcTerminalLabelPosition:Ei,formatUrl:bi,getStylesFromArray:Pi,generateId:ji,random:Oi,runFunc:mi,entityDecode:Ri,insertTitle:qi,isLabelCoordinateInPath:Zi,parseFontSize:Gi,InitIDGenerator:Hi},Ki=w(function(t){let i=t;return i=i.replace(/style.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)}),i=i.replace(/classDef.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)}),i=i.replace(/#\w+;/g,function(t){const i=t.substring(1,t.length-1);return/^\+?\d+$/.test(i)?"ﬂ°°"+i+"¶ß":"ﬂ°"+i+"¶ß"}),i},"encodeEntities"),Xi=w(function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),Vi=w((t,i,{counter:n=0,prefix:e,suffix:s},o)=>o||`${e?`${e}_`:""}${t}_${i}_${n}${s?`_${s}`:""}`,"getEdgeId");function Qi(t){return t??null}function Zi(t,i){const n=Math.round(t.x),e=Math.round(t.y),s=i.replace(/(\d+\.\d+)/g,t=>Math.round(parseFloat(t)).toString());return s.includes(n.toString())||s.includes(e.toString())}w(Qi,"handleUndefinedAttr"),w(Zi,"isLabelCoordinateInPath");export{bt as A,q as B,ei as C,St as D,Pt as E,ct as F,B as G,H,Z as I,z as K,Q as L,ft as M,ut as N,Nt as O,lt as P,Y as R,ni as S,It as T,D as U,R as V,W,Ii as _,Xi as a,ai as b,Vi as c,gi as d,Ui as f,Ji as g,vi as h,Yi as i,yt as j,wt as k,Pi as l,Oi as m,Fi as n,Ki as o,Gi as p,Wi as r,ji as s,ui as t,Qi as u,ci as v,Rt as w,hi as x,_i as y,G as z};
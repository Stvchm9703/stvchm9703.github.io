import{L as n,J as t,av as e,aa as s,a0 as u,a9 as r,x as o,C as a,ap as c,aw as l}from"./BW5koCBL.js";function i(e,s,u){if(null==e)return s(void 0),u&&u(void 0),n;const r=t((()=>e.subscribe(s,u)));return r.unsubscribe?()=>r.unsubscribe():r}const f=[];function b(n,t){return{subscribe:d(n,t).subscribe}}function d(t,s=n){let u=null;const r=new Set;function o(n){if(e(t,n)&&(t=n,u)){const n=!f.length;for(const e of r)e[1](),f.push(e,t);if(n){for(let n=0;n<f.length;n+=2)f[n][0](f[n+1]);f.length=0}}}function a(n){o(n(t))}return{set:o,update:a,subscribe:function(e,c=n){const l=[e,c];return r.add(l),1===r.size&&(u=s(o,a)||n),e(t),()=>{r.delete(l),0===r.size&&u&&(u(),u=null)}}}}function p(t,e,u){const r=!Array.isArray(t),o=r?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=e.length<2;return b(u,((t,u)=>{let c=!1;const l=[];let f=0,b=n;const d=()=>{if(f)return;b();const s=e(r?l[0]:l,t,u);a?t(s):b="function"==typeof s?s:n},p=o.map(((n,t)=>i(n,(n=>{l[t]=n,f&=~(1<<t),c&&d()}),(()=>{f|=1<<t}))));return c=!0,d(),function(){s(p),b(),c=!1}}))}function v(n){let t;return i(n,(n=>t=n))(),t}function h(n){null===o&&u(),c&&null!==o.l?y(o).m.push(n):r((()=>{const e=t(n);if("function"==typeof e)return e}))}function g(n){null===o&&u(),h((()=>()=>t(n)))}function m(){const n=o;return null===n&&u(),(t,e,s)=>{var u;const r=null==(u=n.s.$$events)?void 0:u[t];if(r){const u=a(r)?r.slice():[r],o=function(n,t,{bubbles:e=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:s})}(t,e,s);for(const t of u)t.call(n.x,o);return!o.defaultPrevented}return!0}}function w(n){null===o&&u(),null===o.l&&l(),y(o).a.push(n)}function y(n){var t=n.l;return t.u??(t.u={a:[],b:[],m:[]})}export{g as a,w as b,m as c,p as d,v as g,h as o,b as r,i as s,d as w};
import{C as n,a0 as t,a7 as e,_ as s,L as u,Z as r,x as o,M as c,a8 as l,a9 as a}from"./-SC0CEt4.js";function i(e,s,u){if(null==e)return s(void 0),u&&u(void 0),n;const r=t((()=>e.subscribe(s,u)));return r.unsubscribe?()=>r.unsubscribe():r}const f=[];function b(n,t){return{subscribe:d(n,t).subscribe}}function d(t,s=n){let u=null;const r=new Set;function o(n){if(e(t,n)&&(t=n,u)){const n=!f.length;for(const e of r)e[1](),f.push(e,t);if(n){for(let n=0;n<f.length;n+=2)f[n][0](f[n+1]);f.length=0}}}function c(n){o(n(t))}return{set:o,update:c,subscribe:function(e,l=n){const a=[e,l];return r.add(a),1===r.size&&(u=s(o,c)||n),e(t),()=>{r.delete(a),0===r.size&&u&&(u(),u=null)}}}}function p(t,e,u){const r=!Array.isArray(t),o=r?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=e.length<2;return b(u,((t,u)=>{let l=!1;const a=[];let f=0,b=n;const d=()=>{if(f)return;b();const s=e(r?a[0]:a,t,u);c?t(s):b="function"==typeof s?s:n},p=o.map(((n,t)=>i(n,(n=>{a[t]=n,f&=~(1<<t),l&&d()}),(()=>{f|=1<<t}))));return l=!0,d(),function(){s(p),b(),l=!1}}))}function v(n){let t;return i(n,(n=>t=n))(),t}function h(n){null===o&&u(),l&&null!==o.l?w(o).m.push(n):r((()=>{const e=t(n);if("function"==typeof e)return e}))}function g(n){null===o&&u(),h((()=>()=>t(n)))}function m(){const n=o;return null===n&&u(),(t,e,s)=>{var u;const r=null==(u=n.s.$$events)?void 0:u[t];if(r){const u=c(r)?r.slice():[r],o=function(n,t,{bubbles:e=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:s})}(t,e,s);for(const t of u)t.call(n.x,o);return!o.defaultPrevented}return!0}}function y(n){null===o&&u(),null===o.l&&a(),w(o).a.push(n)}function w(n){var t=n.l;return t.u??(t.u={a:[],b:[],m:[]})}export{g as a,y as b,m as c,p as d,v as g,h as o,b as r,i as s,d as w};